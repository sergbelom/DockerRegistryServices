Сборка мусора

https://docs.docker.com/registry/garbage-collection/ 

Сборка мусора - это процесс удаления больших двоичных объектов из файловой системы, когда на них больше не ссылается манифест. BLOB-объекты могут включать как слои, так и манифесты.


При запуске контейнера очистки происходит следующее.

     Docker выполнит точку входа cleanup.py
     Реестр только для чтения запускается в фоновом режиме (чтобы пользователи могли извлекать данные)
     Скрипт индексирует изображения, теги и слои
     Используя delete_docker_registry_image --untagged -i <repo>, любой слой, на который нет ссылки, удаляется из репозиториев (при этом сохраняются только теги и их текущие слои - вся «история» удаляется)
     будет запущен сборщик мусора реестра, чтобы очистить все висячие капли (реальные данные за всеми слоями)
     Предоставляет вам сводку о том, сколько данных осталось в репозитории

Технические подробности см. В контейнере очистки, его Dockerfile и скрипте очистки.

Чтобы прояснить это, этот инструмент предназначен для удаления неиспользуемых и невидимых данных из вашего реестра Docker.

Каждый репозиторий содержит уровни предыдущих push-уведомлений, а данные BLOB-объектов, стоящие за ним, остаются в процессе сборки мусора, пока на них ссылается слой.
